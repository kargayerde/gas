(this["webpackJsonpeth-gas-dashboard"]=this["webpackJsonpeth-gas-dashboard"]||[]).push([[0],{26:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(20),r=a.n(n),i=(a(26),a(3)),o=a(8),l=a.n(o),u=a(11),j=a(4),b=a(5),d=function(e){var t=e.setGasData,a=e.gasData,s=e.parseTime,c=e.setGasStats,n=0;t(Object(i.a)(Object(i.a)({},a),{},{rektFlag:"neutral"})),console.log("opening websocket");var r=new WebSocket("wss://gasgas.io/prices");r.onopen=function(e){console.log("websocket connected"),t(Object(i.a)(Object(i.a)({},a),{},{socket:r,rektFlag:!1}))},r.onmessage=function(e){n++;var a=Object.values(JSON.parse(e.data).data).map((function(e,t){return 4===t?s(e):(a=e,a/Math.pow(10,9)).toFixed(1);var a}));t({socket:r,prices:[].concat(Object(b.a)(a),[n])}),function(e){var t=e.setGasStats,a=e.prices;t((function(e){return{sums:0===e.sampleSize?a.slice(0,4):e.sums.map((function(e,t){return Number(e)+Number(a[t])})),sampleSize:e.sampleSize+1,history:Object(b.a)(e.history).concat([a.slice(0,4)])}}))}({setGasStats:c,prices:a})},r.onclose=function(e){e.wasClean?console.log("".concat(e.code,": Connection closed cleanly")):(console.log("".concat(e.code,": Connection rekt")),t(Object(i.a)(Object(i.a)({},a),{},{prices:["R","E","K","T","gasgas.io api rekt","refresh"],rektFlag:!0})))},r.onerror=function(e){console.log({onerror:e})}},p=a(21),m=a.n(p),O=a.p+"static/media/cross.7ac58f49.svg",f=a.p+"static/media/plus.0737ce86.svg",h=a.p+"static/media/refresh.755ed584.svg",x=a.p+"static/media/asdf.b49a92e1.wav",v=(a(57),a(0)),g="set",k="ringing",N=function(e){var t=e.gasData,a=Object(s.useState)(),c=Object(j.a)(a,2),n=c[0],r=c[1],i=Object(s.useState)([]),o=Object(j.a)(i,2),l=o[0],u=o[1],d=new Audio(x),p=function(){n<=9999&&n>0&&!l.find((function(e){return e.value===n}))&&u([{value:n,status:g}].concat(Object(b.a)(l)).sort((function(e,t){return t.value-e.value})))};Object(s.useEffect)((function(){!function(e){t&&e.find((function(a,s){if(Number(a.value)>=t.prices[2]&&e[s].status!==k){var c=Object(b.a)(e);c[s].status=k,u(c),d.play()}}))}(l)}),[t]);var m=function(e){return l[e].status===k?"alert":""};return Object(v.jsxs)("div",{className:"alarm-box-container",children:[Object(v.jsxs)("div",{className:"add-alarm-container",children:[Object(v.jsx)("input",{className:"add-alarm-input",maxLength:"4",onChange:function(e){return r(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&p(),function(e){!["Backspace","Delete","Home","End","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].find((function(t){return t===e.key}))&&isNaN(e.key)&&e.preventDefault()}(e)},onWheel:function(e){var t=isNaN(n)?0:n;t=Number(t)+e.deltaY/-50,r(Math.max(t,0))},value:0===n?"":n,placeholder:"alarm"}),Object(v.jsx)("button",{className:"add-alarm-button",placeholder:"alarm",onClick:p,children:Object(v.jsx)("img",{src:f})})]}),l.map((function(e,t){return Object(v.jsxs)("div",{className:"alarm-box alarm-".concat(t+1," ").concat(m(t)),children:[Object(v.jsxs)("div",{className:"alarm-box-text-box",children:[Object(v.jsx)("span",{children:"\u23f0"}),Object(v.jsx)("span",{children:e.value}),Object(v.jsx)("span",{children:"gwei"})]}),Object(v.jsxs)("div",{className:"small-button-box",children:[e.status===k&&Object(v.jsx)("button",{className:"alarm-clear-button small-button",onClick:function(){return function(e){var t=Object(b.a)(l);t[e].status=g,u(t)}(t)},children:Object(v.jsx)("img",{src:h})}),Object(v.jsx)("button",{className:"alarm-reset-button small-button",onClick:function(){return function(e){var t=Object(b.a)(l);t.splice(e,1),u(t)}(t)},children:Object(v.jsx)("img",{src:O})})]})]},t)}))]})},w=(a(59),m.a.init("")),S=function(e){return new Date(e).toUTCString().replace("GMT","UTC")};var C=function(){var e=Object(s.useState)({prices:[],socket:null,rektFlag:!1}),t=Object(j.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)({sums:[],sampleSize:0,history:[]}),r=Object(j.a)(n,2),o=r[0],b=r[1],p=Object(s.useState)(),m=Object(j.a)(p,2),O=m[0],f=m[1],h=Object(s.useState)(21e3),x=Object(j.a)(h,2),g=x[0],k=x[1],C=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.stats.ethprice();case 2:t=e.sent,f(t.result.ethusd);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){d({setGasData:c,gasData:a,parseTime:S,setGasStats:b})}),[]),Object(s.useEffect)((function(){return C(),void setInterval(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:case"end":return e.stop()}}),e)}))),15e3)}),[]),Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)("div",{className:"gas-widget",children:[Object(v.jsx)("div",{className:"gas-frame-container",children:Object(v.jsxs)("div",{className:"gas-frame",children:[["rapid","fast","standard","slow"].map((function(e,t){var s=(O*a.prices[t]*g/Math.pow(10,9)).toFixed(2);return Object(v.jsxs)("div",{className:"price-box ".concat(e),children:[e,":",Object(v.jsx)("div",{className:"price",children:a.prices[t]}),!isNaN(s)&&Object(v.jsxs)("span",{className:"tx-cost",children:["($",s,")"]})]})})),Object(v.jsxs)("div",{className:"timestamp",children:[Object(v.jsx)("span",{children:"last update:"}),Object(v.jsx)("span",{children:a.prices[4]}),Object(v.jsxs)("span",{children:[" (update count: ",a.prices[5],")"]})]}),Object(v.jsx)("button",{className:"kill-button",onClick:function(){a.socket?(a.socket.close(),console.log("killed connection"),c(Object(i.a)(Object(i.a)({},a),{},{socket:void 0}))):(console.log("reconnecting..."),d({setGasData:c,gasData:a,parseTime:S,setGasStats:b,gasStats:o}))},children:"neutral"===a.rektFlag?"Connecting...":a.socket?"KILL":a.rektFlag?"Retry":"Connect"}),Object(v.jsxs)("div",{className:"eth-price-container",children:["ETH: ",O?"$"+O:"disable adblock"]}),Object(v.jsx)("div",{className:"tx-select",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"gasCostInput",children:"tx type: "}),Object(v.jsxs)("select",{id:"gasCostInput",onChange:function(e){k(e.target.value)},children:[Object(v.jsx)("option",{value:21e3,children:"send ETH"}),Object(v.jsx)("option",{value:65e3,children:"send ERC20"}),Object(v.jsx)("option",{value:175e3,children:"LP"}),Object(v.jsx)("option",{value:2e5,children:"SWAP"})]})]})})]})}),Object(v.jsx)(N,{gasData:a})]})})};r.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.9c404b0d.chunk.js.map