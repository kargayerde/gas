(this["webpackJsonpeth-gas-dashboard"]=this["webpackJsonpeth-gas-dashboard"]||[]).push([[0],{26:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(20),r=a.n(s),o=(a(26),a(6)),i=a(8),l=a.n(i),u=a(11),j=a(4),d=a(5),b=function(e){var t=e.setGasData,a=e.gasData,c=e.parseTime,n=0;console.log("opening websocket");var s=new WebSocket("wss://gasgas.io/prices");s.onopen=function(e){console.log("websocket connected"),t(Object(o.a)(Object(o.a)({},a),{},{socket:s}))},s.onmessage=function(e){n++;var a=Object.values(JSON.parse(e.data).data).map((function(e,t){return 4===t?c(e):(a=e,a/Math.pow(10,9)).toFixed(1);var a}));t({socket:s,prices:[].concat(Object(d.a)(a),[n])})},s.onclose=function(e){e.wasClean?console.log("".concat(e.code,": Connection closed cleanly")):console.log("".concat(e.code,": Connection rekt"))},s.onerror=function(e){console.log({onerror:e.message})}},p=a(21),O=a.n(p),m=a.p+"static/media/cross.7ac58f49.svg",f=a.p+"static/media/plus.0737ce86.svg",h=a.p+"static/media/refresh.755ed584.svg",x=a.p+"static/media/asdf.b49a92e1.wav",v=(a(57),a(0)),g="set",N="ringing",k=function(e){var t=e.gasData,a=Object(c.useState)(),n=Object(j.a)(a,2),s=n[0],r=n[1],o=Object(c.useState)([]),i=Object(j.a)(o,2),l=i[0],u=i[1],b=new Audio(x),p=function(){s<=9999&&s>0&&!l.find((function(e){return e.value===s}))&&u([{value:s,status:g}].concat(Object(d.a)(l)).sort((function(e,t){return t.value-e.value})))};Object(c.useEffect)((function(){!function(e){t&&e.find((function(a,c){if(Number(a.value)>=t.prices[2]&&e[c].status!==N){var n=Object(d.a)(e);n[c].status=N,u(n),b.play()}}))}(l)}),[t]);var O=function(e){return l[e].status===N?"alert":""};return Object(v.jsxs)("div",{className:"alarm-box-container",children:[Object(v.jsxs)("div",{className:"add-alarm-container",children:[Object(v.jsx)("input",{className:"add-alarm-input",maxlength:"4",onChange:function(e){return r(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&p(),function(e){!["Backspace","Delete","Home","End","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].find((function(t){return t===e.key}))&&isNaN(e.key)&&e.preventDefault()}(e)},onWheel:function(e){var t=isNaN(s)?0:s;t=Number(t)+e.deltaY/-50,r(Math.max(t,0))},value:0===s?"":s,placeholder:"alarm"}),Object(v.jsx)("button",{className:"add-alarm-button",placeholder:"alarm",onClick:p,children:Object(v.jsx)("img",{src:f})})]}),l.map((function(e,t){return Object(v.jsxs)("div",{className:"alarm-box alarm-".concat(t+1," ").concat(O(t)),children:[Object(v.jsxs)("div",{className:"alarm-box-text-box",children:[Object(v.jsx)("span",{children:"\u23f0"}),Object(v.jsx)("span",{children:e.value}),Object(v.jsx)("span",{children:"gwei"})]}),Object(v.jsxs)("div",{className:"small-button-box",children:[e.status===N&&Object(v.jsx)("button",{className:"alarm-clear-button small-button",onClick:function(){return function(e){var t=Object(d.a)(l);t[e].status=g,u(t)}(t)},children:Object(v.jsx)("img",{src:h})}),Object(v.jsx)("button",{className:"alarm-reset-button small-button",onClick:function(){return function(e){var t=Object(d.a)(l);t.splice(e,1),u(t)}(t)},children:Object(v.jsx)("img",{src:m})})]})]},t)}))]})},w=(a(59),O.a.init("")),C=function(e){return new Date(e).toUTCString().replace("GMT","UTC")};var D=function(){var e=Object(c.useState)({prices:[],socket:null}),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(),r=Object(j.a)(s,2),i=r[0],d=r[1],p=Object(c.useState)(21e3),O=Object(j.a)(p,2),m=O[0],f=O[1],h=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.stats.ethprice();case 2:t=e.sent,d(t.result.ethusd);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b({setGasData:n,gasData:a,parseTime:C})}),[]),Object(c.useEffect)((function(){return h(),void setInterval(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:case"end":return e.stop()}}),e)}))),15e3)}),[]),Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)("div",{className:"gas-widget",children:[Object(v.jsx)("div",{className:"gas-frame-container",children:Object(v.jsxs)("div",{className:"gas-frame",children:[["rapid","fast","standard","slow"].map((function(e,t){var c=(i*a.prices[t]*m/Math.pow(10,9)).toFixed(2);return Object(v.jsxs)("div",{className:"price-box ".concat(e),children:[e,":",Object(v.jsx)("div",{className:"price",children:a.prices[t]}),!isNaN(c)&&Object(v.jsxs)("span",{className:"tx-cost",children:["($",c,")"]})]})})),Object(v.jsxs)("div",{className:"timestamp",children:[Object(v.jsx)("span",{children:"last update:"}),Object(v.jsx)("span",{children:a.prices[4]}),Object(v.jsxs)("span",{children:[" (update count: ",a.prices[5],")"]})]}),Object(v.jsx)("button",{className:"kill-button",onClick:function(){a.socket?(a.socket.close(),console.log("killed connection"),n(Object(o.a)(Object(o.a)({},a),{},{socket:void 0}))):(console.log("reconnecting..."),b({setGasData:n,gasData:a,parseTime:C}))},children:null===a.socket?"":a.socket?"KILL":"Reconnect"}),Object(v.jsxs)("div",{className:"eth-price-container",children:["ETH: ",i?"$"+i:"disable adblock"]}),Object(v.jsx)("div",{className:"tx-select",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"gasCostInput",children:"tx type: "}),Object(v.jsxs)("select",{id:"gasCostInput",onChange:function(e){f(e.target.value)},children:[Object(v.jsx)("option",{value:21e3,children:"send ETH"}),Object(v.jsx)("option",{value:65e3,children:"send ERC20"}),Object(v.jsx)("option",{value:175e3,children:"LP"}),Object(v.jsx)("option",{value:2e5,children:"SWAP"})]})]})})]})}),Object(v.jsx)(k,{gasData:a})]})})};r.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(D,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.d18189df.chunk.js.map