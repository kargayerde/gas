(this["webpackJsonpeth-gas-dashboard"]=this["webpackJsonpeth-gas-dashboard"]||[]).push([[0],{39:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(32),r=a.n(s),o=(a(39),a(2)),i=a(8),l=a.n(i),u=a(13),b=a(6),j=a(5),d=function e(t){var a=t.setGasData,n=t.gasData,c=t.parseTime,s=t.setGasStats,r=t.config,i=0;a(Object(o.a)(Object(o.a)({},n),{},{rektFlag:"neutral"})),console.log("opening websocket");var l=new WebSocket("wss://gasgas.io/prices");l.onopen=function(e){console.log("websocket connected"),a(Object(o.a)(Object(o.a)({},n),{},{socket:l,rektFlag:!1}))},l.onmessage=function(e){i++;var t=Object.values(JSON.parse(e.data).data).map((function(e,t){return 4===t?c(e):(a=e,a/Math.pow(10,9)).toFixed(1);var a}));a({socket:l,prices:[].concat(Object(j.a)(t),[i])}),function(e){var t=e.setGasStats,a=e.prices;t((function(e){return{sums:0===e.sampleSize?a.slice(0,4):e.sums.map((function(e,t){return Number(e)+Number(a[t])})),sampleSize:e.sampleSize+1,history:Object(j.a)(e.history).concat([a.slice(0,4)])}}))}({setGasStats:s,prices:t})},l.onclose=function(t){t.wasClean?console.log("".concat(t.code,": Connection closed cleanly")):(console.log("".concat(t.code,": Connection rekt")),a(Object(o.a)(Object(o.a)({},n),{},{prices:["R","E","K","T","gasgas.io api rekt","ded"],rektFlag:!0})),console.log({config:r}),r.autoRetry&&(console.log({auto:r.autoRetry}),setTimeout((function(){e({setGasData:a,gasData:n,parseTime:c,setGasStats:s,config:r}),console.log("getting gas")}),15e3)))},l.onerror=function(e){console.log({onerror:e})}},p=a(33),f=a.n(p),h=a(34),O=a.n(h),m=a.p+"static/media/cross.7ac58f49.svg",x=a.p+"static/media/plus.0737ce86.svg",g=a.p+"static/media/refresh.755ed584.svg",v=a.p+"static/media/asdf.b49a92e1.wav",k=(a(86),a(0)),N="set",y="ringing",w=function(e){var t=e.gasData,a=Object(n.useState)(),c=Object(b.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)([]),i=Object(b.a)(o,2),l=i[0],u=i[1],d=new Audio(v),p=function(){s<=9999&&s>0&&!l.find((function(e){return e.value===s}))&&u([{value:s,status:N}].concat(Object(j.a)(l)).sort((function(e,t){return t.value-e.value})))};Object(n.useEffect)((function(){!function(e){t&&e.find((function(a,n){if(Number(a.value)>=t.prices[2]&&e[n].status!==y){var c=Object(j.a)(e);c[n].status=y,u(c),d.play()}}))}(l)}),[t]);var f=function(e){return l[e].status===y?"alert":""};return Object(k.jsxs)("div",{className:"alarm-box-container",children:[Object(k.jsxs)("div",{className:"add-alarm-container",children:[Object(k.jsx)("input",{className:"add-alarm-input",maxLength:"4",onChange:function(e){return r(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&p(),function(e){!["Backspace","Delete","Home","End","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].find((function(t){return t===e.key}))&&isNaN(e.key)&&e.preventDefault()}(e)},onWheel:function(e){var t=isNaN(s)?0:s;t=Number(t)+e.deltaY/-50,r(Math.max(t,0))},value:0===s?"":s,placeholder:"alarm"}),Object(k.jsx)("button",{className:"add-alarm-button",placeholder:"alarm",onClick:p,children:Object(k.jsx)("img",{src:x})})]}),l.map((function(e,t){return Object(k.jsxs)("div",{className:"alarm-box alarm-".concat(t+1," ").concat(f(t)),children:[Object(k.jsxs)("div",{className:"alarm-box-text-box",children:[Object(k.jsx)("span",{children:"\u23f0"}),Object(k.jsx)("span",{children:e.value}),Object(k.jsx)("span",{children:"gwei"})]}),Object(k.jsxs)("div",{className:"small-button-box",children:[e.status===y&&Object(k.jsx)("button",{className:"alarm-clear-button small-button",onClick:function(){return function(e){var t=Object(j.a)(l);t[e].status=N,u(t)}(t)},children:Object(k.jsx)("img",{src:g})}),Object(k.jsx)("button",{className:"alarm-reset-button small-button",onClick:function(){return function(e){var t=Object(j.a)(l);t.splice(e,1),u(t)}(t)},children:Object(k.jsx)("img",{src:m})})]})]},t)}))]})},S=(a(88),function(e){var t=e.gasStats,a={RED:"rgb(247, 26, 0)",YELLOW:"rgb(255, 237, 48)",GREEN:"rgb(0, 135, 57)",PURPLE:"rebeccapurple"},n=Object(j.a)(Array(500).keys()).map((function(){return Math.random()*Math.random()*500+30}));return Object(k.jsxs)("div",{className:"graph-container",children:[Object(k.jsxs)("div",{className:"graph-info-box",children:[Object(k.jsx)("div",{children:"ETH Gas Station API"}),t.prices.map((function(e,t){return Object(k.jsx)("div",{children:e})}))]}),Object(k.jsxs)("div",{className:"line-graph-container",style:{zIndex:300,background:"none",width:"100%",height:"100%",position:"absolute",overflow:"visible"},children:[function(e){var t=e.positions,a=e.offset;return Object(k.jsx)("div",{children:t.map((function(e,n){var c=n*a,s=(n+1)*a,r=500-Number(e),o=500-Number(t[n+1]);return o?Object(k.jsx)("svg",{index:n,className:"line line-".concat(n),style:{position:"absolute",overflow:"visible",opacity:".5"},children:Object(k.jsx)("line",{id:"line-".concat(n),style:{fill:"red",strokeWidth:3,stroke:"#FFFFFF"},x1:c,x2:s,y1:r,y2:o})}):null}))})}({positions:n,offset:10}),Object(k.jsx)("div",{style:{position:"absolute",height:"10px",width:"10px",background:"red",borderRadius:"50%"}}),Object(k.jsx)("div",{style:{position:"absolute",height:"10px",width:"10px",background:"red",borderRadius:"50%"}})]}),t.history.map((function(e,t){var n=10*(t+1);return Object(k.jsx)("span",{children:e.map((function(e,t){var c=Object.values(a),s={height:"".concat(1.3*e,"px"),width:"4px",position:"absolute",bottom:"5px",left:"".concat(n+5,"px"),background:"".concat(c[t]),zIndex:"".concat(100+t)};return Object(k.jsx)("span",{style:s})}))})}))]})}),E={etherscanKey:"UTIYWQDZAPK59ZTCVYFM5VG595HURMGAEH",ethGasStationKey:"e213ca34bbb5b36cec9d417236fcbbecbab8156633994f116e800f903e0b",wallet:"0xEB7dC5D228c246E3D87F978AA0c316eE40e9e149"},C=(a(89),f.a.init("")),G=function(e){return new Date(e).toUTCString().replace("GMT","UTC")},D=function(){var e=Object(n.useRef)(),t=Object(n.useState)({prices:[],socket:null,rektFlag:!1}),a=Object(b.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)({sums:[],sampleSize:0,history:[]}),i=Object(b.a)(r,2),j=i[0],p=i[1],f=Object(n.useState)({prices:[],sums:[0,0,0,0],sampleSize:0,history:[]}),h=Object(b.a)(f,2),m=h[0],x=h[1],g=Object(n.useState)(),v=Object(b.a)(g,2),N=v[0],y=v[1],D=Object(n.useState)(21e3),F=Object(b.a)(D,2),R=F[0],T=F[1],A=Object(n.useState)({autoRetry:!1,showGraph:!0}),I=Object(b.a)(A,2),z=I[0],L=I[1],M=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.stats.ethprice();case 2:t=e.sent,y(t.result.ethusd);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("https://ethgasstation.info/api/ethgasAPI.json?api-key=".concat(E.ethGasStationKey));case 2:t=e.sent,a=[t.data.fastest,t.data.fast,t.data.average,t.data.safeLow].map((function(e){return e/10})),x((function(e){return Object(o.a)(Object(o.a)({},e),{},{sampleSize:e.sampleSize+1,prices:a,sums:e.sums.map((function(e,t){return e+a[t]})),history:e.history.concat([a])})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){d({setGasData:s,gasData:c,parseTime:G,setGasStats:p,config:e})}),[]),Object(n.useEffect)((function(){e.current=z}),[z]);Object(n.useEffect)((function(){return M(),H(),setInterval((function(){return H()}),1e4),void setInterval(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:case"end":return e.stop()}}),e)}))),15e3)}),[]);return Object(k.jsxs)("div",{className:"app",children:[Object(k.jsxs)("div",{className:"gas-widget",children:[Object(k.jsx)("div",{className:"gas-frame-container",children:Object(k.jsxs)("div",{className:"gas-frame",children:[["rapid","fast","standard","slow"].map((function(e,t){var a=(N*c.prices[t]*R/Math.pow(10,9)).toFixed(2);return Object(k.jsxs)("div",{className:"price-box ".concat(e),children:[e,":",Object(k.jsx)("div",{className:"price",children:c.prices[t]}),!isNaN(a)&&Object(k.jsxs)("span",{className:"tx-cost",children:["($",a,")"]})]})})),Object(k.jsxs)("div",{className:"timestamp",children:[Object(k.jsx)("span",{children:"last update:"}),Object(k.jsx)("span",{children:c.prices[4]}),Object(k.jsxs)("span",{children:[" (update count: ",c.prices[5],")"]})]}),Object(k.jsxs)("div",{className:"eth-price-container",children:["ETH: ",N?"$"+N:"disable adblock"]}),Object(k.jsxs)("div",{className:"kill-button-container",children:[Object(k.jsx)("button",{className:"kill-button",onClick:function(){c.socket?(c.socket.close(),console.log("killed connection"),s(Object(o.a)(Object(o.a)({},c),{},{socket:void 0}))):(console.log("reconnecting..."),d({setGasData:s,gasData:c,parseTime:G,setGasStats:p,gasStats:j,config:e}))},children:"neutral"===c.rektFlag?"Connecting...":c.socket?"KILL":c.rektFlag?"Retry":"Connect"}),!0===c.rektFlag?Object(k.jsxs)("span",{className:"autoconnect-checkbox",children:[Object(k.jsx)("input",{type:"checkbox",id:"autoconnect",checked:z.autoRetry,onChange:function(){L((function(t){return console.log("CONFIG IS CHANGED TO ",{ref:e.current}),console.log({onchange:t.autoRetry}),Object(o.a)(Object(o.a)({},t),{},{autoRetry:!t.autoRetry})})),e.current=z}}),Object(k.jsx)("label",{children:" auto?"})]}):null]}),Object(k.jsxs)("div",{className:"tx-select",children:[Object(k.jsx)("label",{htmlFor:"gasCostInput",children:"tx type: "}),Object(k.jsxs)("select",{id:"gasCostInput",onChange:function(e){T(e.target.value)},children:[Object(k.jsx)("option",{value:21e3,children:"send ETH"}),Object(k.jsx)("option",{value:65e3,children:"send ERC20"}),Object(k.jsx)("option",{value:175e3,children:"LP"}),Object(k.jsx)("option",{value:2e5,children:"SWAP"})]})]})]})}),Object(k.jsx)(w,{gasData:c})]}),z.showGraph?Object(k.jsx)(S,{gasStats:m}):null]})};r.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(D,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.51daaef8.chunk.js.map